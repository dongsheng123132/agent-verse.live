<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一带一路春节红包 - 演示视频</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #0b0e14;
            font-family: 'Courier New', monospace;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2;
            pointer-events: none;
        }

        .lyric-line {
            font-size: 2.8rem;
            font-weight: bold;
            color: #fff;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.22, 1, 0.36, 1);
            text-shadow: 0 0 15px rgba(255, 68, 68, 0.8);
            margin-bottom: 2rem;
        }

        .lyric-line.active {
            opacity: 1;
            transform: translateY(0);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #aaa;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .subtitle.active {
            opacity: 1;
        }

        .logo {
            position: absolute;
            top: 30px;
            left: 30px;
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.6);
            z-index: 3;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 5px 15px;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div class="logo">CONFLUX · 一带一路挑战赛</div>

    <div id="overlay">
        <div id="main-text" class="lyric-line">准备连接节点...</div>
        <div id="sub-text" class="subtitle">Connecting to Belt & Road Network...</div>
    </div>

    <canvas id="world"></canvas>

    <script>
        // --- 演示流程脚本 ---
        const script = [
            { t: 0, main: "AgentVerse 丝路智付", sub: "Based on Conflux eSpace" },
            { t: 3000, main: "场景：跨境企业薪资结算", sub: "Scenario: Cross-Border Payroll" },
            { t: 6000, main: "痛点：传统汇款慢、成本高", sub: "Pain Points: Slow Check & High Fees" },
            { t: 9000, main: "解决方案：PayFi 红包协议", sub: "Solution: PayFi Red Packet Protocol" },
            { t: 12500, main: "正在初始化智能合约...", sub: "Initializing Smart Contract..." },
            { t: 16000, main: "存入资金池：10,000 USDT", sub: "Deposit: 10,000 USDT (Gas Paid by Sponsor)" },
            { t: 20000, main: "生成 500 个专属红包链接", sub: "Generating 500 Claim Links..." },
            { t: 24000, main: "分发至：东南亚分部", sub: "Distributing to: Southeast Asia Branch" },
            { t: 28000, main: "分发至：中东建设团队", sub: "Distributing to: Middle East Construction Team" },
            { t: 32000, main: "员工点击领取...", sub: "Employees Claiming via Web3 Wallet..." },
            { t: 36000, main: "实时结算：秒级到账", sub: "Settlement: Instant Finality" },
            { t: 40000, main: "成本节省：99%", sub: "Cost Saving: >99%" },
            { t: 44000, main: "文化传递：新春快乐！", sub: "Cultural Connection: Happy Chinese New Year!" },
            { t: 48000, main: "AgentVerse x CONFLUX", sub: "Build the Future together." },
            { t: 55000, main: "演示结束", sub: "End of Demo" }
        ];

        // --- 文字控制 ---
        const mainText = document.getElementById('main-text');
        const subText = document.getElementById('sub-text');
        let startTime = null;
        let currentIndex = 0;

        function updateTexts(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;

            if (currentIndex < script.length) {
                const item = script[currentIndex];
                if (elapsed >= item.t) {
                    // Update content
                    mainText.classList.remove('active');
                    subText.classList.remove('active');

                    setTimeout(() => {
                        mainText.innerText = item.main;
                        subText.innerText = item.sub;
                        mainText.classList.add('active');
                        subText.classList.add('active');
                    }, 500);

                    currentIndex++;
                }
            }
            requestAnimationFrame(updateTexts);
        }
        requestAnimationFrame(updateTexts);

        // --- 地球/连线/粒子动画 (Canvas) ---
        const canvas = document.getElementById('world');
        const ctx = canvas.getContext('2d');
        let width, height;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // 模拟节点
        const nodes = [];
        const packetParticles = [];

        function initNodes() {
            // 中心节点 (中国)
            nodes.push({ x: 0.7, y: 0.4, type: 'center', color: '#ff4444' });
            // 周边节点 (一带一路)
            for (let i = 0; i < 8; i++) {
                nodes.push({
                    x: 0.3 + Math.random() * 0.4,
                    y: 0.5 + Math.random() * 0.4,
                    type: 'branch',
                    color: '#4488ff'
                });
            }
        }
        initNodes();

        function drawMap() {
            // 简单的背景网格
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            const gridSize = 50;
            for (let x = 0; x < width; x += gridSize) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, height); ctx.stroke(); }
            for (let y = 0; y < height; y += gridSize) { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(width, y); ctx.stroke(); }
        }

        function drawNodes() {
            nodes.forEach(node => {
                const screenX = node.x * width;
                const screenY = node.y * height;

                // Glow
                const grad = ctx.createRadialGradient(screenX, screenY, 0, screenX, screenY, 20);
                grad.addColorStop(0, node.color);
                grad.addColorStop(1, 'rgba(0,0,0,0)');
                ctx.fillStyle = grad;
                ctx.beginPath(); ctx.arc(screenX, screenY, 20, 0, Math.PI * 2); ctx.fill();

                // Core
                ctx.fillStyle = '#fff';
                ctx.beginPath(); ctx.arc(screenX, screenY, 3, 0, Math.PI * 2); ctx.fill();
            });
        }

        function spawnPacket() {
            const center = nodes[0];
            const target = nodes[1 + Math.floor(Math.random() * (nodes.length - 1))];
            packetParticles.push({
                x: center.x * width,
                y: center.y * height,
                tx: target.x * width,
                ty: target.y * height,
                progress: 0,
                speed: 0.02 + Math.random() * 0.03,
                color: Math.random() > 0.5 ? '#ffdd00' : '#ff4444' // Gold or Red
            });
        }

        function drawPackets() {
            packetParticles.forEach((p, i) => {
                p.progress += p.speed;
                if (p.progress >= 1) {
                    packetParticles.splice(i, 1);
                    // Explosion effect at target could depend on challenge
                    return;
                }

                const currX = p.x + (p.tx - p.x) * p.progress;
                const currY = p.y + (p.ty - p.y) * p.progress;

                // Trail
                ctx.beginPath();
                ctx.moveTo(p.x, p.y);
                ctx.lineTo(currX, currY);
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.stroke();

                // Packet head
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(currX, currY, 4, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function loop() {
            requestAnimationFrame(loop);
            ctx.fillStyle = 'rgba(11, 14, 20, 0.3)'; // Fade effect
            ctx.fillRect(0, 0, width, height);

            drawMap();
            drawNodes();

            if (Math.random() < 0.1) spawnPacket(); // Randomly send packets
            drawPackets();
        }
        loop();

    </script>
</body>

</html>